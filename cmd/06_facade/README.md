# Facade

ライブラリー、フレームワーク、その他のクラスの複雑な組み合わせに対し、簡素化されたインターフェースを提供する

![facade](https://refactoring.guru/images/patterns/content/facade/facade.png)

## 構造
![UML](https://refactoring.guru/images/patterns/diagrams/facade/structure-indexed.png)

1. ファサード （Facade） は、 サブシステムの機能の特定の部分への便利なアクセスを提供します。 クライアントからのリクエストをどこにどう送り、 どういう細かい操作をすればいいのかを知っています。

2. 追加のファサード （Additional Facade） クラスを作成すると、 関係ない機能によって単一のファサードが汚染され、 さらに複雑な構造のクラスがまた一つできてしまうのを防止することができます。 追加のファサードは、 クライアントからでも、 他のファサードからでも使用できます。

3. 複雑なサブシステムは、 何十もの様々なオブジェクトで構成されています。 それらを使って何か意味のあることをするためには、 サブシステムの実装の詳細について熟知する必要があります。 たとえば、 オブジェクトを正しい順序で初期化し、 適切な形式のデータを提供する必要があります。サブシステム内のクラスは、 ファサードの存在を認識していません。 クラスはシステム内で動作し、 お互いに直接連携して機能します。

4. クライアントは、 サブシステムのオブジェクトを直接呼び出す代わりにファサードを使用します。

## 実装方法
1. 既存のサブシステムよりも簡単なインターフェースを提供することが可能かどうかを確認します。 このインターフェースにより、 クライアント・コードを多くのサブシステムのクラスから独立させられれば、 うまい方向に向いています。

2. このインターフェースを宣言し、 新ファサード・クラスとして定義します。 クライアントからの呼び出しは、 サブシステムの適切なオブジェクトに再送されます。 クライアント・コードがすでにそれを行ってなければ、 サブシステムの初期化やそれ以降のライフサイクル管理は、 ファサードの責任です。

3. このパターンを最大限に活用するためには、 すべてのクライアント・コードがファサード経由でサブシステムと通信するようにします。 これで、 クライアント・コードはサブシステムのコードの変更から保護されます。 たとえば、 サブシステムが新しいバージョンにアップグレードされた場合、 ファサードのコードを変更するだけですみます。

4. ファサードが過大になった場合は、 ファサードの振る舞いの一部を抽出して、 新規の精製ファサード・クラス作成を検討してみてください。

## 他のパターンとの関係
- Facade が既存のオブジェクトに対して新しいインターフェースを定義するのに対し、 Adapter は既存のインターフェースを使えるようにしようとするものです。 Adapter は通常一つのオブジェクトだけを包み込みますが、 Facade は複数のオブジェクトからなるサブシステム全体を相手にします。

- サブシステムがオブジェクトを作成する方法をクライアントから隠蔽することだけが目的なら、 Abstract Factory を Facade の代わりに使えます。

- Flyweight は多くの小さなオブジェクトを作る方法についてですが、 Facade はサブシステム全体を表す単一のオブジェクトを作る方法に関してです。

- Facade と Mediator は、 多くの密に結合されたクラス間の協力関係を組織するという似た目的があります。

  - Facade は、 オブジェクトのサブシステムへの簡略化されたインターフェースを定義しますが、 新しい機能が導入されるわけではありません。 サブシステム自体はファサードを認識しません。 サブシステム内のオブジェクト同士は直接やりとりします。
   - Mediator は、 システムのコンポーネント間の通信を一元化します。 コンポーネントはメディエーター・オブジェクトについてのみ知っており、 直接やりとりしません。

- 多くの場合、 ファサード・オブジェクトは一つだけあれば十分なので、 Facade はしばしば Singleton に変換可能です。

- Facade は、 どちらも複雑な実体の緩衝材として機能し、 初期化も行うという意味で、 Proxy と似てます。 Facade と異なり、 Proxy はそのサービス・オブジェクトと同じインターフェースを持ち、 両者は交換可能です。

## 引用元

> https://refactoring.guru/ja/design-patterns/facade
> https://refactoring.guru/images/patterns/content/facade/facade.png
> https://refactoring.guru/images/patterns/diagrams/facade/structure-indexed.png